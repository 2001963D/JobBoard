@page "/listings/reviews/create/"
@inject HttpClient _client
@inject NavigationManager _navManager

<h3 class="card-title">Create New Review</h3>
<hr />
<br />
<FormComponent ButtonText="Create Review" review="review" OnValidSubmit="@CreateReview" />

@code { 
    Review review = new Review();
    private IList<Review> Reviews;
    [Parameter] public int id { get; set; }

    protected async override Task OnInitializedAsync()
    {
        Reviews = await _client.GetFromJsonAsync<List<Review>>($"{Endpoints.ReviewsEndpoint}");
    }

    protected async override Task OnParametersSetAsync()
    {
        review = await
       _client.GetFromJsonAsync<Review>($"{Endpoints.ReviewsEndpoint}/{id}");
    }
    private async Task CreateReview()
    {
        await _client.PostAsJsonAsync(Endpoints.ReviewsEndpoint, review);
        _navManager.NavigateTo("/listings/reviews/{id:int}");
    } }